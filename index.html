<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>Dashboard â€“ ××“×¨×™×›×™×</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="style.css">
</head>

<body>
<h1>×“×©×‘×•×¨×“ ×ª×”×œ×™×š ××™×•×Ÿ ××“×¨×™×›×™×</h1>

<section class="kpi-container">
  <div class="kpi" id="total"></div>
  <div class="kpi" id="accepted"></div>
  <div class="kpi" id="mismatch"></div>
</section>

<h2>Funnel ×ª×”×œ×™×š ××™×•×Ÿ</h2>
<canvas id="funnelChart"></canvas>
<p class="insight">
×”××™×‘×•×“ ×”××©××¢×•×ª×™ ××ª×¨×—×© ×‘×™×Ÿ ×”××‘×—×Ÿ ×œ×¨××™×•×Ÿ ×”×˜×›× ×•×œ×•×’×™ â€“ ××¢×™×“ ×¢×œ ×¤×¢×¨ ×¢×•××§ ×©×œ× ××–×•×”×” ×‘××‘×—×Ÿ.
</p>

<h2>×¤×¢×¨ ×”×—×œ×˜×” ×™×“× ×™×ª â†” ××¡×œ×•×œ ×‘×¤×•×¢×œ</h2>
<canvas id="mismatchChart"></canvas>

<h2>×¡×™×‘×•×ª × ×¤×™×œ×” â€“ ×¨××™×•×Ÿ ×˜×›× ×•×œ×•×’×™</h2>
<canvas id="techChart"></canvas>

<h2>×¡×™×‘×•×ª × ×¤×™×œ×” â€“ ×¨××™×•×Ÿ ×”×“×¨×›×ª×™</h2>
<canvas id="pedChart"></canvas>

<script>
fetch("data.json")
.then(res => res.json())
.then(data => {

document.getElementById("total").innerHTML = 
`<h3>${data.kpis.total}</h3><p>×¡×”"×› ××•×¢××“×™×</p>`;

document.getElementById("accepted").innerHTML = 
`<h3>${data.kpis.accepted}</h3><p>×”×ª×§×‘×œ×•</p>`;

document.getElementById("mismatch").innerHTML = 
`<h3>${data.kpis.mismatch}</h3><p>××™ ×”×ª×××” ×‘××¡×œ×•×œ</p>`;

// Funnel
new Chart(document.getElementById("funnelChart"), {
type: "bar",
data: {
labels: ["××‘×—×Ÿ","×¢×‘×¨×• ××‘×—×Ÿ","×¨××™×•×Ÿ ×˜×›× ×•×œ×•×’×™","×¨××™×•×Ÿ ×”×“×¨×›×ª×™","×”×ª×§×‘×œ×•"],
datasets: [{
data: data.funnel,
backgroundColor: "#4CAF50"
}]
},
options: { responsive:true }
});

// Mismatch
new Chart(document.getElementById("mismatchChart"), {
type: "pie",
data: {
labels: ["×ª×•××","×”×•×¢×œ×” ×¨××”","×”×•×¨×“ ×¨××”"],
datasets: [{
data: [
data.decisionMismatch.match,
data.decisionMismatch.upgraded,
data.decisionMismatch.downgraded
],
backgroundColor: ["#4CAF50","#FF9800","#F44336"]
}]
}
});

// Tech failures
new Chart(document.getElementById("techChart"), {
type: "bar",
data: {
labels: ["×¤×¢×¨ ××§×¦×•×¢×™","×—×•×¡×¨ ×¢×•××§","×‘×œ×‘×•×œ ××•×©×’×™×"],
datasets: [{
data: Object.values(data.techFailures),
backgroundColor: "#2196F3"
}]
}
});

// Ped failures
new Chart(document.getElementById("pedChart"), {
type: "bar",
data: {
labels: ["×”×¡×‘×¨ ××‘×•×œ×’×Ÿ","×—×•×¡×¨ ××‘× ×”","×—×•×¡×¨ ×”×ª×××” ×œ×œ×•××“"],
datasets: [{
data: Object.values(data.pedFailures),
backgroundColor: "#9C27B0"
}]
}
});



});


</script>

<h2>ğŸ’° ×¡×™××•×œ×¦×™×™×ª ×—×™×¡×›×•×Ÿ ×‘×–××Ÿ ×¨××™×•× ×•×ª</h2>

<div class="simulation-box">
  <label>××—×•×– ××•×¢××“×™× ×©× ×™×ª×Ÿ ×”×™×” ×œ×¡× ×Ÿ ××•×§×“×: 
    <span id="percentValue">20</span>%
  </label>
  <input type="range" min="0" max="50" value="20" id="percentSlider">

  <div class="results">
    <p>×¡×”"×› ×“×§×•×ª × ×—×¡×›×•×ª: <strong id="minutesSaved"></strong></p>
    <p>×¡×”"×› ×©×¢×•×ª × ×—×¡×›×•×ª: <strong id="hoursSaved"></strong></p>
    <p>×™××™ ×¢×‘×•×“×” (8 ×©×¢×•×ª): <strong id="daysSaved"></strong></p>
  </div>
</div>
<script>

const techDuration = 45;
const pedDuration = 45;
const interviewsPerCandidate = techDuration + pedDuration;

const candidatesInterviewed = 85; // ×¢×“×›× ×™ ×× ×¦×¨×™×š

const slider = document.getElementById("percentSlider");
const percentValue = document.getElementById("percentValue");

function calculateSavings(percent) {
  const filtered = candidatesInterviewed * (percent/100);
  const minutes = filtered * interviewsPerCandidate;
  const hours = minutes / 60;
  const days = hours / 8;

  document.getElementById("minutesSaved").innerText = Math.round(minutes);
  document.getElementById("hoursSaved").innerText = hours.toFixed(1);
  document.getElementById("daysSaved").innerText = days.toFixed(1);
}

slider.addEventListener("input", function() {
  percentValue.innerText = this.value;
  calculateSavings(this.value);
});

calculateSavings(slider.value);

</script>
</body>
</html>